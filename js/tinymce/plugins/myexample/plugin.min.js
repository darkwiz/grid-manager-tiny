(function($) {

tinymce.PluginManager.add('myexample', function(editor, url) {
    // Add a button that opens a window
    editor.addButton('myexample', {
        text: 'My button',
        icon: false,
        onclick: function() {
            // Open window
            editor.windowManager.open({
                title: 'Example plugin',
                bodyType: 'tabpanel',
                body: [
                    {
                        title: 'General',
                        type: 'form',
                        items: [
                         {type: 'textbox', name: 'label', label: 'Label'},
                         {type: 'textbox', name: 'pin', label: 'PIN'}
                ]
                    },
                    {
                        title: 'Advanced',
                        type: 'form',
                        items: [
                         {type: 'textbox', name: 'example', label: 'Example'}
                ]
                    }

                ],

                  //  Parameters and arguments we want available to the window.
                editor: editor,                   //    This is a reference to the current editor. We'll need this to insert the shortcode we create.

                jquery: $,                        //    If you want jQuery in the dialog, you must pass it here.
                onsubmit: function(e) {
                    // Insert content when the window form is submitted
                    editor.insertContent(e.data.label + ': ');
                    editor.execCommand('mceInsertContent', false, editor.dom.createHTML('input', {
                        value: e.data.pin, name: e.data.label
                    }));
                }
            });
        }
    });


});
})(jQuery);
